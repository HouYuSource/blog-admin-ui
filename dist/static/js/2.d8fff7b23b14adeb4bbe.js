webpackJsonp([2],{DMV9:function(t,e){},GHqW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),s=a.n(n),i=a("MAW0"),l={name:"blogAdd",data:function(){return{tagList:[],catalogList:[],tagInputVisible:!1,tagInputValue:"",entity:{id:"",title:"",summary:"",content:"",displayImg:"",catalogId:"",catalogName:"",tags:"",status:!0,canComment:!0}}},created:function(){this.findCategoryList();var t=this.$route.params.blogEntity;t&&(this.entity=JSON.parse(s()(t)),this.tagList=this.entity.tags.split(","),this.entity.status=1==this.entity.status,this.entity.canComment=1==this.entity.canComment)},methods:{testlog:function(t){this.$message({showClose:!0,message:t,type:"success"})},resetForm:function(){this.entity={id:"",title:"",summary:"",content:"",displayImg:"",catalogId:"",catalogName:"",tags:"",status:!0,canComment:!0},this.tagList=[]},submitForm:function(){var t=this,e=JSON.parse(s()(this.entity));e.status=e.status?1:0,e.canComment=e.canComment?1:0,this.catalogList.forEach(function(t){t.id===e.catalogId&&(e.catalogName=t.catalogName)}),e.tags="",this.tagList.forEach(function(t){e.tags+=t+","}),e.tags=e.tags.substring(0,e.tags.length-1);var a=this.checkForm(e);!0===a?e.id?i.f(e).then(function(e){t.$message({showClose:!0,message:e.msg,type:"success"}),t.$router.push({path:"/blogList"})}):i.e(e).then(function(e){t.$message({showClose:!0,message:e.msg,type:"success"}),t.$router.push({path:"/blogList"})}):this.$message({showClose:!0,message:a,type:"warning"})},checkForm:function(t){return t.title?t.summary?t.content?t.catalogId&&t.catalogName?t.tags?t.displayImg?"number"!=typeof t.status?"文章状态不可以为空":"number"==typeof t.canComment||"评论状态不可以为空":"首页图不可以为空":"标签不可以为空":"分类不可以为空":"内容不可以为空":"摘要不可以为空":"标题不可以为空"},findCategoryList:function(){var t=this;i.b().then(function(e){t.catalogList=e.data})},tagHandleClose:function(t){this.tagList.splice(this.tagList.indexOf(t),1)},tagShowInput:function(){var t=this;this.tagInputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},tagHandleInputConfirm:function(){var t=this.tagInputValue;t&&this.tagList.push(t),this.tagInputVisible=!1,this.tagInputValue=""}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"entity",attrs:{model:t.entity,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"文章标题"}},[a("el-input",{staticStyle:{"font-weight":"bold"},attrs:{placeholder:"请输入文章标题"},model:{value:t.entity.title,callback:function(e){t.$set(t.entity,"title",e)},expression:"entity.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文章摘要"}},[a("el-input",{attrs:{rows:"3",type:"textarea",placeholder:"请选择文章摘要"},model:{value:t.entity.summary,callback:function(e){t.$set(t.entity,"summary",e)},expression:"entity.summary"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文章正文"}},[a("mavon-editor",{staticStyle:{"min-height":"500px"},model:{value:t.entity.content,callback:function(e){t.$set(t.entity,"content",e)},expression:"entity.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文章分类"}},[a("el-select",{attrs:{placeholder:"请选择文章分类"},model:{value:t.entity.catalogId,callback:function(e){t.$set(t.entity,"catalogId",e)},expression:"entity.catalogId"}},t._l(t.catalogList,function(t){return a("el-option",{key:t.id,attrs:{label:t.catalogName,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"文章标签"}},[t._l(t.tagList,function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.tagHandleClose(e)}}},[t._v("\n        "+t._s(e)+"\n      ")])}),t._v(" "),t.tagInputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.tagHandleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.tagHandleInputConfirm(e)}},model:{value:t.tagInputValue,callback:function(e){t.tagInputValue=e},expression:"tagInputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.tagShowInput}},[t._v(" + 标签")])],2),t._v(" "),a("el-form-item",{attrs:{label:"首页图"}},[a("lable",[t._v("https://shaines.cn/view/image?src=")]),a("br"),t._v(" "),a("el-input",{staticStyle:{width:"600px"},model:{value:t.entity.displayImg,callback:function(e){t.$set(t.entity,"displayImg",e)},expression:"entity.displayImg"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否发布"}},[a("el-switch",{model:{value:t.entity.status,callback:function(e){t.$set(t.entity,"status",e)},expression:"entity.status"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否可评论"}},[a("el-switch",{model:{value:t.entity.canComment,callback:function(e){t.$set(t.entity,"canComment",e)},expression:"entity.canComment"}})],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:t.resetForm}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("发布")])],1)],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(l,o,!1,function(t){a("DMV9")},null,null);e.default=r.exports},MAW0:function(t,e,a){"use strict";e.d=function(t){return Object(n.a)({url:"/admin/blog/page",method:"get",params:t})},e.b=function(t){return Object(n.a)({url:"/catalog/list",method:"get"})},e.e=function(t){return Object(n.a)({url:"/admin/blog",method:"post",data:t})},e.f=function(t){return Object(n.a)({url:"/admin/blog",method:"put",data:t})},e.a=function(t){return Object(n.a)({url:"/admin/blog/"+t,method:"delete"})},e.c=function(){return Object(n.a)({url:"/admin/blog/format/image/src",method:"delete"})};var n=a("/AKN")}});
//# sourceMappingURL=2.d8fff7b23b14adeb4bbe.js.map