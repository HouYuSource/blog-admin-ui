webpackJsonp([6],{"8+Tx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("3cXf"),o=a.n(l),s=a("pcot"),i=a("Pqsl"),n={name:"userList",data:function(){return{trueFlag:!0,loading:!0,q:{order:"desc",keyword:"",pageIndex:0,pageSize:10},totalElements:0,totalPages:0,userList:[],dialogTableVisible:!1,dialogFormVisible:!1,entity:{id:"",username:"",password:"",avatar:"",email:"",role:""}}},created:function(){this.userPage()},methods:{log:function(e){this.$message({showClose:!0,message:e,type:"success"})},userPage:function(e){var t=this;this.loading=!0,this.q.keyword=e||this.q.keyword,s.d(this.q).then(function(e){t.userList=e.data.content,t.totalElements=e.data.totalElements,t.totalPages=e.data.totalPages,t.loading=!1})},checkForm:function(e){return e.username?e.password?e.avatar?e.email?!!e.role||"角色不可以为空":"邮箱不可以为空":"头像不可以为空":"密码不可以为空":"用户名不可以为空"},saveUser:function(){var e=this,t=this.checkForm(this.entity);!0===t?(this.entity.password=this.$md5(i.b+this.entity.password),this.entity.id?s.f(this.entity).then(function(t){"200"==t.code&&e.$message({showClose:!0,message:"修改成功!",type:"success"}),e.userPage()}):s.e(this.entity).then(function(t){"200"==t.code&&e.$message({showClose:!0,message:"新增成功!",type:"success"}),e.userPage()}),this.dialogFormVisible=!1):this.$message({showClose:!0,message:t,type:"warning"})},search:function(){this.$message({showClose:!0,message:"就那么几个, 没必要搜索了!",type:"warning"}),this.userPage()},handleAdd:function(){this.dialogFormVisible=!0,this.entity={id:"",username:"",password:"",avatar:"",email:"",role:""}},handleEdit:function(e,t){this.dialogFormVisible=!0,this.entity=JSON.parse(o()(t))},handleDelete:function(e,t){var a=this;this.$confirm("此操作不可逆，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.a(t.id).then(function(e){"200"==e.code&&a.$message({showClose:!0,message:"删除成功",type:"success"}),a.userPage()})})},handleSizeChange:function(e){this.q.pageSize=e,this.userPage()},handleCurrentChange:function(e){this.q.pageIndex=e-1,this.userPage()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.q}},[a("el-form-item",{attrs:{label:"搜索"}},[a("el-input",{attrs:{placeholder:"名称",clearable:""},on:{change:e.search},model:{value:e.q.keyword,callback:function(t){e.$set(e.q,"keyword",t)},expression:"q.keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.userList,"show-header":"",border:"",fit:!e.trueFlag}},[a("el-table-column",{attrs:{prop:"username",label:"名称","show-overflow-tooltip":e.trueFlag,width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":e.trueFlag,width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatar",label:"头像","show-overflow-tooltip":e.trueFlag,width:"400"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"角色","show-overflow-tooltip":e.trueFlag,width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间","show-overflow-tooltip":e.trueFlag,width:"300"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"page-size":e.q.pageSize,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",total:e.totalElements},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.entity}},[a("el-form-item",{attrs:{label:"名称","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"set good name"},model:{value:e.entity.username,callback:function(t){e.$set(e.entity,"username",t)},expression:"entity.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":"100px"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"abc.123"},model:{value:e.entity.password,callback:function(t){e.$set(e.entity,"password",t)},expression:"entity.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"头像","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"https://www.shaines.cn/avatar.png"},model:{value:e.entity.avatar,callback:function(t){e.$set(e.entity,"avatar",t)},expression:"entity.avatar"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"for.houyu@qq.com"},model:{value:e.entity.email,callback:function(t){e.$set(e.entity,"email",t)},expression:"entity.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"USER"},model:{value:e.entity.role,callback:function(t){e.$set(e.entity,"role",t)},expression:"entity.role"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(n,r,!1,function(e){a("EInj")},null,null);t.default=c.exports},EInj:function(e,t){}});
//# sourceMappingURL=6.463b48e1ffdaba5d4dc2.js.map