webpackJsonp([4],{MZ0H:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("/AKN");var o={name:"logList",data:function(){return{trueFlag:!0,loading:!0,q:{order:"desc",keyword:"",pageIndex:0,pageSize:10},totalElements:0,totalPages:0,logList:[]}},created:function(){this.logPage()},methods:{log:function(e){this.$message({showClose:!0,message:e,type:"success"})},logPage:function(e){var t,a=this;this.loading=!0,this.q.keyword=e||this.q.keyword,(t=this.q,Object(l.a)({url:"/admin/log/page",method:"get",params:t})).then(function(e){a.logList=e.data.content,a.totalElements=e.data.totalElements,a.totalPages=e.data.totalPages,a.loading=!1})},search:function(){this.logPage()},deleteWeekBefore:function(){var e=this;Object(l.a)({url:"/admin/log/delete/week/before",method:"get"}).then(function(t){200===t.code&&(e.$message({showClose:!0,message:"操作成功",type:"success"}),e.search())})},handleDelete:function(e,t){var a=this;this.$confirm("此操作不可逆，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({showClose:!0,message:"暂不支持删除",type:"warning"})})},handleSizeChange:function(e){this.q.pageSize=e,this.logPage()},handleCurrentChange:function(e){this.q.pageIndex=e-1,this.logPage()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.q}},[a("el-form-item",{attrs:{label:"搜索"}},[a("el-input",{attrs:{placeholder:"名称",clearable:""},on:{change:e.search},model:{value:e.q.keyword,callback:function(t){e.$set(e.q,"keyword",t)},expression:"q.keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.deleteWeekBefore}},[e._v("仅保留最近7天数据")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.logList,"show-header":"",border:"",fit:!e.trueFlag}},[a("el-table-column",{attrs:{prop:"browser",label:"浏览器","show-overflow-tooltip":e.trueFlag,width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP","show-overflow-tooltip":e.trueFlag,width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口","show-overflow-tooltip":e.trueFlag,width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"地址","show-overflow-tooltip":e.trueFlag,width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"param",label:"参数","show-overflow-tooltip":e.trueFlag,width:"450"}}),e._v(" "),a("el-table-column",{attrs:{prop:"result",label:"响应","show-overflow-tooltip":e.trueFlag,width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"时间","show-overflow-tooltip":e.trueFlag,width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"page-size":e.q.pageSize,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",total:e.totalElements},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(o,n,!1,function(e){a("fsTN")},null,null);t.default=r.exports},fsTN:function(e,t){}});
//# sourceMappingURL=4.448b4b921da4fd6ff101.js.map